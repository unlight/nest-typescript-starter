# Migration `20200327000541-category`

This migration has been generated by roman <<>> at 3/27/2020, 12:05:41 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."Category" (
    "id" TEXT NOT NULL  ,
    "name" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."_CategoryToPost" (
    "A" TEXT NOT NULL  ,
    "B" TEXT NOT NULL  ,FOREIGN KEY ("A") REFERENCES "Category"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("B") REFERENCES "Post"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE UNIQUE INDEX "quaint"."_CategoryToPost_AB_unique" ON "_CategoryToPost"("A","B")

CREATE  INDEX "quaint"."_CategoryToPost_B_index" ON "_CategoryToPost"("B")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200317005941-count-posts..20200327000541-category
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -15,19 +15,26 @@
    output   = "../@generated/type-graphql"
 }
 model User {
-  id         String    @id  @default(cuid())
-  createdAt DateTime @default(now())
-  email     String   @unique
-  name      String?
-  posts      Post[]
-  countPosts  Int  @default(0)
+  id          String     @id  @default(cuid())
+  createdAt   DateTime   @default(now())
+  email       String     @unique
+  name        String?
+  posts       Post[]
+  countPosts  Int        @default(0)
 }
 model Post {
-  id         String    @id  @default(cuid())
-  createdAt  DateTime   @default(now())
-  updatedAt  DateTime   @updatedAt
-  author     User
-  title      String
+  id          String     @id  @default(cuid())
+  createdAt   DateTime   @default(now())
+  updatedAt   DateTime   @updatedAt
+  author      User
+  title       String
+  categories  Category[]
 }
+
+model Category {
+  id          String     @id  @default(cuid())
+  name        String
+  posts       Post[]
+}
```


